# 기능 명세서: 복소수 좌표계 그래프 (Complex Coordinate Graphing)

**Feature Branch**: `001-complex-graphing`
**Created**: 2026-01-14
**Status**: Draft
**Input**: User description: "@docs/recommendation.md 해당 요구사항을 참조하여 specify를 진행하고 @docs/specify 에 한국어로 저장해줘."

## 사용자 시나리오 및 테스트 (User Scenarios & Testing) *(필수)*

### 사용자 스토리 1 - 복소수 수식 시각화 (우선순위: P1)

수학 학습자로서, 복소수 수식을 입력했을 때 2D 평면에 즉시 그래프로 그려지는 것을 보고 수학적 개념을 시각적으로 이해하고 싶다.

**우선순위 선정 이유**: 핵심 가치 제안입니다. 시각화 기능 없이는 도구의 존재 이유가 없습니다.

**독립 테스트**: 표준 복소수 수식(예: `z = 1 + i`)을 입력하고 그래프에 올바른 점이 표시되는지 확인합니다.

**인수 시나리오 (Acceptance Scenarios)**:

1. **Given** 애플리케이션이 로드된 상태에서, **When** 입력 패널에 `z = 3 + 4i`를 입력하면, **Then** 그래프의 (3, 4) 좌표에 점이 렌더링된다.
2. **Given** 잘못된 수식(예: `z = ++`)이 입력되면, **When** 입력을 멈추거나 포커스를 잃을 때, **Then** 입력 필드 근처에 오류 표시가 나타난다.
3. **Given** 암시적 곱셈을 사용하고자 할 때, **When** `2*i` 대신 `2i` 또는 `2z`를 입력하면, **Then** 시스템이 이를 곱셈으로 올바르게 해석하여 처리한다.

---

### 사용자 스토리 2 - 동적 변수 탐색 (우선순위: P1)

교육자로서, 슬라이더로 조절 가능한 변수를 정의하고 이를 애니메이션화하여 파라미터 변화가 복소함수에 미치는 영향을 실시간으로 보여주고 싶다.

**우선순위 선정 이유**: 정적인 그래프 도구와 차별화되는 기능이며, 교육용 도구로서의 가치를 높입니다.

**독립 테스트**: 변수 `a=1`을 정의하고 수식 `z = a + i`에 사용한 뒤, 슬라이더를 움직여 그래프 변화를 확인합니다.

**인수 시나리오 (Acceptance Scenarios)**:

1. **Given** `k = 2`를 입력하면, **When** 엔터를 치거나 포커스를 이동했을 때, **Then** 입력창 아래에 `k`라는 라벨이 붙은 슬라이더가 생성된다.
2. **Given** 슬라이더 `k`와 연동된 수식 `z = k + i`가 있을 때, **When** 슬라이더를 드래그하면, **Then** 그래프 위의 점이 실시간(목표 60fps)으로 움직인다.
3. **Given** 슬라이더가 있을 때, **When** "재생(Play)" 버튼을 클릭하면, **Then** 값이 범위 내에서 자동으로 순환하며 그래프가 애니메이션된다.
4. **Given** 슬라이더가 있을 때, **When** 범위 양끝 값을 클릭하면, **Then** 최소값, 최대값, 간격(Step)을 직접 수정할 수 있다.

---

### 사용자 스토리 3 - 좌표계 분석 및 전환 (우선순위: P2)

사용자로서, 복소평면(Re/Im)과 직교좌표(X/Y) 뷰를 전환하고 극좌표 그리드를 켜고 꺼면서 다양한 좌표 표현 방식 간의 관계를 이해하고 싶다.

**우선순위 선정 이유**: 복소수 해석과 일반 대수학 맥락 모두에서 활용 가능하게 하여 분석의 깊이를 더합니다.

**독립 테스트**: 뷰 모드 스위치를 전환하고 축 라벨 변경을 확인합니다.

**인수 시나리오 (Acceptance Scenarios)**:

1. **Given** 기본 복소평면 뷰 상태에서, **When** "XY 모드"를 클릭하면, **Then** 축 라벨이 "Re/Im"에서 "X/Y"로 변경된다.
2. **Given** 복소평면 뷰 상태에서, **When** "극좌표 그리드(Polar Grid)" 토글을 켜면, **Then** 크기(Magnitude)와 편각(Argument)을 나타내는 원형 그리드가 그래프 위에 오버레이된다.

## 요구사항 (Requirements) *(필수)*

### 기능 요구사항 (Functional Requirements)

- **FR-001**: 시스템은 좌측 입력 패널과 우측 그래프 캔버스로 구성된 분할 화면 레이아웃을 제공해야 한다.
- **FR-002**: 시스템은 복소수, 상수(i, e, pi), 기본 함수(sin, cos, exp 등)를 포함한 수학적 표현식을 파싱해야 한다.
- **FR-003**: 시스템은 입력 수식에서 암시적 곱셈(예: `2i`, `3z`)을 지원해야 한다.
- **FR-004**: 시스템은 수식 내의 자유 변수(free variables)를 자동으로 감지하여 UI 슬라이더를 생성해야 한다.
- **FR-005**: 슬라이더는 사용자가 설정 가능한 범위(최소/최대)와 간격(Step) 값을 지원해야 한다. (기본값: -10 ~ 10, Step: 0.1 등)
- **FR-006**: 시스템은 슬라이더 값의 자동 애니메이션(재생/일시정지, 반복/왕복 모드)을 지원해야 한다.
- **FR-007**: 그래프 캔버스는 마우스/터치를 이용한 팬(Pan, 이동) 및 줌(Zoom, 확대/축소) 기능을 지원해야 한다.
- **FR-008**: 슬라이더 조작 시 그래프는 초당 60프레임(60fps)을 목표로 부드럽게 갱신되어야 한다.
- **FR-009**: 시스템은 축 라벨을 "Real / Imaginary"와 "X / Y" 간에 전환할 수 있는 기능을 제공해야 한다.
- **FR-010**: 복소평면 모드에서 선택적으로 극좌표(원형) 그리드를 오버레이할 수 있어야 한다.
- **FR-011**: 그래프 요소 위에 마우스를 올리면 좌표값이나 복소수 속성(절댓값/편각)을 툴팁 등으로 표시해야 한다.

### 주요 엔티티 (Key Entities)

- **Expression (수식)**: 사용자가 입력한 수학 공식 (예: `z = x + iy`).
- **Variable (변수)**: UI 슬라이더와 연결된, 이름과 숫자 값을 가진 객체.
- **PlotObject (그래프 객체)**: 수식의 결과로 캔버스에 그려지는 시각적 요소 (점, 선, 곡선).
- **ViewSettings (뷰 설정)**: 그래프의 상태 설정 (좌표계 모드, 극좌표 그리드 표시 여부, 뷰포트 범위).

## 성공 기준 (Success Criteria) *(필수)*

### 측정 가능한 성과 (Measurable Outcomes)

- **SC-001**: 사용자는 앱 로드 후 5초 이내에 표준 복소수(예: `1+i`)를 그래프에 그릴 수 있다.
- **SC-002**: 간단한 점과 연결된 슬라이더를 드래그할 때, 그래프 렌더링은 평균적인 데스크탑 환경에서 최소 30fps 이상(권장 60fps)을 유지한다.
- **SC-003**: 암시적 곱셈(예: `2i`) 입력 시 95% 이상 사용자 오류 없이 올바르게 파싱된다.
- **SC-004**: 애플리케이션은 Core Web Vitals (LCP, FID, CLS) 지표에서 "Good" 등급을 달성하여 높은 반응성을 보장한다.
